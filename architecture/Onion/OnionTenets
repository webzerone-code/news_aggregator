4 tenets of onion architecture
- the application is build around and independent object model
- inner layers define interfaces. outer layers implement interfaces
- direction of coupling is toward the center
- all application core code can be compiled and run separate from infrastructure


ğŸ§… 1ï¸âƒ£ Domain Layer (The Core of the Onion)
â€œThe business rules that never change no matter what framework or DB you use.â€
Contains:
Entities (like Article, User, Invoice)
Value Objects (like Email, Money)
Domain Events (e.g., ArticlePublished)
Domain Interfaces (e.g., ArticleRepositoryInterface)
Domain Services (business logic that doesnâ€™t belong to a single entity)
Never depends on anything else.
No Laravel, no HTTP, no DB.
Itâ€™s pure PHP and can live alone in a package.
ğŸ§© 2ï¸âƒ£ Application Layer
â€œThe use cases â€” orchestrating the domain.â€
Contains:
Application Services (like your ArticleService)
Use Cases (e.g., PublishArticle, SendArticleEmail)
Input/Output DTOs
Calls domain objects + interfaces, but never infrastructure.
âš™ï¸ 3ï¸âƒ£ Infrastructure Layer
â€œAdapters to external systems.â€
Contains:
Database implementations (Eloquent, Doctrine, raw SQL)
Mailers (Laravel Mail, SMTP, Mailgun, etc.)
Notifications
File storage
Logging
APIs
Framework integrations (controllers, commands, jobs)
ğŸ§­ 4ï¸âƒ£ Presentation Layer (a.k.a. Interface Layer or API Layer)
â€œHow the world interacts with your app.â€
Contains:
Controllers
Commands (CLI)
Jobs
GraphQL resolvers, API endpoints, etc.
It calls Application layer use cases â€” nothing else.


architecture/
â”‚
â”œâ”€â”€ Domain/
â”‚   â”œâ”€â”€ Entities/
â”‚   â”‚   â””â”€â”€ Article.php
â”‚   â”œâ”€â”€ Repositories/
â”‚   â”‚   â””â”€â”€ ArticleRepositoryInterface.php
â”‚   â””â”€â”€ Services/
â”‚       â””â”€â”€ ArticleBusinessRules.php
â”‚
â”œâ”€â”€ Application/
â”‚   â”œâ”€â”€ DTOs/
â”‚   â”œâ”€â”€ Services/
â”‚   â”‚   â””â”€â”€ ArticleService.php
â”‚   â””â”€â”€ UseCases/
â”‚       â””â”€â”€ PublishArticle.php
â”‚
â”œâ”€â”€ Infrastructure/
â”‚   â”œâ”€â”€ Persistence/
â”‚   â”‚   â””â”€â”€ EloquentArticleRepository.php   â† your current class
â”‚   â”œâ”€â”€ Mail/
â”‚   â”‚   â””â”€â”€ LaravelMailer.php
â”‚   â””â”€â”€ Notifications/
â”‚       â””â”€â”€ LaravelNotifier.php
â”‚
â””â”€â”€ Presentation/
    â””â”€â”€ Http/
        â””â”€â”€ Controllers/
            â””â”€â”€ ArticleController.php
